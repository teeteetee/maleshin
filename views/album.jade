doctype html(lang='en')
head
    meta(charset='utf-8')
    |     
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    |     
    meta(name='viewport', content='width=device-width, initial-scale=1')
    |     
    title MALESHIN
    // Bootstrap
    link(href='http://maleshin.com/bootstrap/css/bootstrap.min.css', rel='stylesheet')
    // jQuery (necessary for Bootstrap's JavaScript plugins)
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js')
    // Include all compiled plugins (below), or include individual files as needed
    script(src='http://maleshin.com/js/bootstrap.min.js')
    // HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
    // WARNING: Respond.js doesn't work if you view the page via file://
    //if lt IE 9
      script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
      |       
      script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')
    |     
    style.
      html {
      background-size: cover;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      min-width:768px;
      }
      @font-face {
      font-family:br;
      src:url('/bootstrap/fonts/bebasneue_regular.ttf');
      }
      @font-face {
      font-family:attentica;
      src:url('/bootstrap/fonts/Attentica.ttf');
      }
      @font-face {
      font-family:roboto-thin;
      src:url('/bootstrap/fonts/Roboto-Thin.ttf');
      }
      body {
      background-color:transparent;
      }
      h1 {
      font-family:attentica;
      font-size:8vw;
      color:white;
      margin:0px;

      }
      h2 {
      color:white;
      font-family:roboto-thin;
      font-size:2vw;
      margin-top:1vh;
      margin-bottom:1vh;
      margin-right:1vw;
      margin-left:1vw;
      }
      h3 {
      font-family:arial;
      font-size:2vw;
      }
      h4 {
      font-weight:bold;
      font-family:br;
      font-size:4vw;
      margin-top:2vh;
      margin-bottom:0px;
      }
      h5 {
      font-family:roboto-thin;
      color:#c35;
      font-size:2vw;
      font-weight:bold;
      }
      h6 {
      font-family:roboto-thin;
      font-size:8vw;
      color:#03406a;
      opacity:0.5;
      }
      .container {
      margin:0px;
      padding:0px;
      width:100%;
      }
      #header {
      cursor:pointer;
      -webkit-transition:height 1.5s;
      -webkit-transition-timing-function:ease-out;
      }
      #header{
      background-color:#eee;
      }
      #header:hover{
      background-color:#ddd;
      }
      #main {
      margin-left:0px;
      margin-right:0px;
      }
      img{
      width:15vw;
      height:10vw;
      margin:3vh;
      cursor:pointer;
      }
      #cross{
      height:3vw;
      width:3vw;
      margin:2vw;
      }
      #closepreview{
      position:fixed;
      z-index:8000;
      right:10vw;
      }
  body
    .container(style='z-index:1;background-color:white;position:absolute;min-height:100vh;')
      #header.row
        .col-xs-1
          img(style='height:3vw;margin:2vh;position:inherit;width:auto;',src='/bootstrap/images/circle_bird_left.png')
        .col-xs-11(style='padding-left:0px;')
          h2(style='color:#333;line-height:8vh;font-weight:bold;margin-left:0px;') Альбомы 
      .row
        .col-xs-12(style='text-align:center;')
          h4 #{albumname}
      .row
        #images.col-xs-12      
      script.
        $('#header').click(function() {window.location='http://maleshin.com/gall';});     
        var source = !{images};       
        function populate() {
        console.log(source);
        var alngth = source.length;
        var lnum = alngth%5;
        var times = (alngth - lnum)/4;
        if(alngth<6){
        switch(alngth){
        case(1):
        $('#images').append("<div class='row' ><div id='image"+source[0].fid+"' onclick='showimg("+JSON.stringify(source[0].filename)+"); class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[0].filename+"'></div></div>");
        return
        break;
        case(2):
        $('#images').append("<div class='row' ><div id='image"+source[0].fid+"' onclick='showimg("+JSON.stringify(source[0].filename)+");' class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[0].filename+"'></div><div id='image"+source[1].fid+"' onclick='showimg("+JSON.stringify(source[1].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[1].filename+"'></div></div>");
        return
        break;
        case(3):
        $('#images').append("<div class='row' ><div id='image"+source[0].fid+"' onclick='showimg("+JSON.stringify(source[0].filename)+");' class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[0].filename+"'></div><div id='image"+source[1].fid+"' onclick='showimg("+JSON.stringify(source[1].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[1].filename+"'></div><div id='image"+source[2].fid+"' onclick='showimg("+JSON.stringify(source[2].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[2].filename+"'></div></div>");
        return
        break;
        case(4):
        $('#images').append("<div class='row' ><div id='image"+source[0].fid+"' onclick='showimg("+JSON.stringify(source[0].filename)+");' class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[0].filename+"'></div><div id='image"+source[1].fid+"' onclick='showimg("+JSON.stringify(source[1].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[1].filename+"'></div><div id='image"+source[2].fid+"' onclick='showimg("+JSON.stringify(source[2].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[2].filename+"'></div><div id='image"+source[3].fid+"' onclick='showimg("+JSON.stringify(source[3].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[3].filename+"'></div></div>");
        return
        break;
        case(5):
        $('#images').append("<div class='row' ><div id='image"+source[0].fid+"' onclick='showimg("+JSON.stringify(source[0].filename)+");' class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[0].filename+"'></div><div id='image"+source[1].fid+"' onclick='showimg("+JSON.stringify(source[1].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[1].filename+"'></div><div id='image"+source[2].fid+"' onclick='showimg("+JSON.stringify(source[2].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[2].filename+"'></div><div id='image"+source[3].fid+"' onclick='showimg('"+source[3].filename+"');' class='col-xs-2 pic' ><img src='/images/"+source[3].filename+"'></div><div id='image"+source[4].fid+"' onclick='showimg("+JSON.stringify(source[4].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[4].filename+"'></div></div>");
        return
        break;
        }
        }
        else {
        for(var xx=0;xx<times;xx++) {
        var y = 5*xx;
        var tmr1 = tmr+1;
        var tmr2 = tmr+2;
        var tmr3 = tmr+3;
        var tmr4 = tmr+4;
        $('#images').append("<div class='row' ><div id='image"+source[0+y].fid+"' onclick='showimg("+JSON.stringify(source[0+y]filename)+");' class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[0+y].filename+"'></div><div id='image"+source[1+y].fid+"' onclick='showimg("+JSON.stringify(source[1+y].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[1+y].filename+"'></div><div id='image"+source[2+y].fid+"' onclick='showimg("+JSON.stringify(source[2+y].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[2+y].filename+"'></div><div id='image"+source[3+y].fid+"' onclick='showimg('"+source[3+y].filename+"');' class='col-xs-2 pic' ><img src='/images/"+source[3+y].filename+"'></div><div id='image"+source[4+y].fid+"' onclick='showimg("+JSON.stringify(source[4+y].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[4+y].filename+"'></div></div>");
        }
        var tmr = 5*times;
        switch(lnum){
        case(1):
        $('#images').append("<div class='row' ><div id='image"+source[tmr1].fid+"' onclick='showimg("+JSON.stringify(source[tmr1].filename)+"); class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[tmr1].filename+"'></div></div>");
        return
        break;
        case(2):
        $('#images').append("<div class='row' ><div id='image"+source[tmr1].fid+"' onclick='showimg("+JSON.stringify(source[tmr1].filename)+");' class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[tmr1].filename+"'></div><div id='image"+source[tmr+2].fid+"' onclick='showimg("+JSON.stringify(source[tmr2].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[tmr2].filename+"'></div></div>");
        return
        break;
        case(3):
        $('#images').append("<div class='row' ><div id='image"+source[tmr1].fid+"' onclick='showimg("+JSON.stringify(source[tmr1].filename)+");' class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[tmr1].filename+"'></div><div id='image"+source[tmr2].fid+"' onclick='showimg("+JSON.stringify(source[tmr2].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[tmr2].filename+"'></div><div id='image"+source[tmr3].fid+"' onclick='showimg("+JSON.stringify(source[tmr3].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[tmr3].filename+"'></div></div>");
        return
        break;
        case(4):
        $('#images').append("<div class='row' ><div id='image"+source[tmr1].fid+"' onclick='showimg("+JSON.stringify(source[tmr1].filename)+");' class='col-xs-2 col-xs-offset-1 pic' ><img src='/images/"+source[tmr1].filename+"'></div><div id='image"+source[tmr2].fid+"' onclick='showimg("+JSON.stringify(source[tmr2].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[tmr2].filename+"'></div><div id='image"+source[tmr3].fid+"' onclick='showimg("+JSON.stringify(source[tmr3].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[tmr3].filename+"'></div><div id='image"+source[tmr4].fid+"' onclick='showimg("+JSON.stringify(source[tmr4].filename)+");' class='col-xs-2 pic' ><img src='/images/"+source[tmr4].filename+"'></div></div>");
        return
        break;
        }
        }
        }
        populate();
        function showimg(imgpath) {
        console.log('start');
        $('.container').css('-webkit-filter','brightness(50%)');
        $('body').append("<div class='container' id='previewcont' style='z-index:7000;position:absolute;width:100%;height:100%;'><div id='closepreview' class='row'><div class='col-xs-1 col-xs-offset-11'><img id='cross' src='/bootstrap/images/cross_white.png'></div></div><div class='row'><div class='col-xs-12' style='text-align:center;'><img style='height:100%;width:initial;margin:0px;' src='/images/"+imgpath+"'></div></div></div><script>$('#closepreview').click(function(){console.log('close preview');$('#previewcont').remove();$('.container').css('-webkit-filter','brightness(100%)');});<\/script>");
        console.log('finish');
        }

          

   
